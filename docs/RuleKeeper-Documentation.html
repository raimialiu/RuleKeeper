<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RuleKeeper Documentation</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --accent-color: #3b82f6;
            --text-color: #1f2937;
            --light-gray: #f3f4f6;
            --border-color: #e5e7eb;
            --code-bg: #f8fafc;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.7;
            color: var(--text-color);
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            background-color: #ffffff;
        }

        h1 {
            color: var(--primary-color);
            font-size: 2.5em;
            margin-bottom: 10px;
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 15px;
        }

        h2 {
            color: var(--secondary-color);
            font-size: 1.8em;
            margin-top: 40px;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
        }

        h3 {
            color: var(--text-color);
            font-size: 1.4em;
            margin-top: 30px;
        }

        h4 {
            color: var(--text-color);
            font-size: 1.1em;
            margin-top: 25px;
        }

        .subtitle {
            color: #6b7280;
            font-size: 1.2em;
            margin-bottom: 30px;
        }

        code {
            background-color: var(--code-bg);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            border: 1px solid var(--border-color);
        }

        pre {
            background-color: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.9em;
            line-height: 1.5;
        }

        pre code {
            background: none;
            border: none;
            padding: 0;
            color: inherit;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 0.95em;
        }

        th, td {
            border: 1px solid var(--border-color);
            padding: 12px 15px;
            text-align: left;
        }

        th {
            background-color: var(--light-gray);
            font-weight: 600;
            color: var(--secondary-color);
        }

        tr:nth-child(even) {
            background-color: #fafafa;
        }

        .highlight {
            background-color: #fef3c7;
            padding: 2px 5px;
            border-radius: 3px;
        }

        .note {
            background-color: #eff6ff;
            border-left: 4px solid var(--primary-color);
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }

        .warning {
            background-color: #fffbeb;
            border-left: 4px solid var(--warning-color);
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }

        .tip {
            background-color: #ecfdf5;
            border-left: 4px solid var(--success-color);
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }

        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge-critical { background-color: #fef2f2; color: #dc2626; }
        .badge-high { background-color: #fff7ed; color: #ea580c; }
        .badge-medium { background-color: #fefce8; color: #ca8a04; }
        .badge-low { background-color: #ecfeff; color: #0891b2; }
        .badge-info { background-color: #f3f4f6; color: #4b5563; }

        .toc {
            background-color: var(--light-gray);
            padding: 25px 30px;
            border-radius: 8px;
            margin: 30px 0;
        }

        .toc h3 {
            margin-top: 0;
            color: var(--secondary-color);
        }

        .toc ul {
            list-style: none;
            padding-left: 0;
        }

        .toc ul ul {
            padding-left: 20px;
        }

        .toc li {
            margin: 8px 0;
        }

        .toc a {
            color: var(--primary-color);
            text-decoration: none;
        }

        .toc a:hover {
            text-decoration: underline;
        }

        .page-break {
            page-break-after: always;
        }

        @media print {
            body {
                padding: 0;
                font-size: 11pt;
            }

            pre {
                white-space: pre-wrap;
                word-wrap: break-word;
            }

            h2 {
                page-break-before: always;
            }

            h2:first-of-type {
                page-break-before: avoid;
            }

            .no-print {
                display: none;
            }
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .feature-item {
            background: var(--light-gray);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid var(--primary-color);
        }

        .feature-item strong {
            color: var(--secondary-color);
        }

        footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            text-align: center;
            color: #6b7280;
            font-size: 0.9em;
        }
    </style>
</head>
<body>

<h1>RuleKeeper</h1>
<p class="subtitle">Policy-as-Code CLI Tool for C# Code Analysis</p>
<p><strong>Version:</strong> 1.0.0 | <strong>Last Updated:</strong> January 2026</p>

<div class="toc">
    <h3>Table of Contents</h3>
    <ul>
        <li><a href="#overview">1. Overview</a></li>
        <li><a href="#installation">2. Installation</a></li>
        <li><a href="#quick-start">3. Quick Start</a></li>
        <li><a href="#commands">4. Command Reference</a>
            <ul>
                <li><a href="#cmd-scan">4.1 scan</a></li>
                <li><a href="#cmd-init">4.2 init</a></li>
                <li><a href="#cmd-validate">4.3 validate</a></li>
                <li><a href="#cmd-list-rules">4.4 list-rules</a></li>
                <li><a href="#cmd-explain">4.5 explain</a></li>
                <li><a href="#cmd-editorconfig">4.6 generate-editorconfig</a></li>
            </ul>
        </li>
        <li><a href="#configuration">5. Configuration</a>
            <ul>
                <li><a href="#cfg-structure">5.1 Configuration Structure</a></li>
                <li><a href="#cfg-thresholds">5.2 Threshold Configuration</a></li>
                <li><a href="#cfg-visualization">5.3 Visualization Options</a></li>
            </ul>
        </li>
        <li><a href="#rules">6. Built-in Rules</a></li>
        <li><a href="#output-formats">7. Output Formats</a></li>
        <li><a href="#cicd">8. CI/CD Integration</a></li>
        <li><a href="#custom-rules">9. Custom Rules</a></li>
        <li><a href="#troubleshooting">10. Troubleshooting</a></li>
    </ul>
</div>

<h2 id="overview">1. Overview</h2>

<p><strong>RuleKeeper</strong> is a powerful, policy-as-code command-line interface (CLI) tool designed for analyzing C# source code using Roslyn's deep semantic analysis capabilities. It enables teams to enforce coding standards, security practices, and architectural guidelines automatically and consistently.</p>

<div class="feature-grid">
    <div class="feature-item">
        <strong>Deep Semantic Analysis</strong>
        <p>Uses Roslyn for both AST and semantic model analysis</p>
    </div>
    <div class="feature-item">
        <strong>YAML Configuration</strong>
        <p>Highly configurable rules via YAML files</p>
    </div>
    <div class="feature-item">
        <strong>24+ Built-in Rules</strong>
        <p>Covering naming, security, async, design, and more</p>
    </div>
    <div class="feature-item">
        <strong>Multiple Formats</strong>
        <p>Console, JSON, SARIF, HTML output support</p>
    </div>
    <div class="feature-item">
        <strong>Configurable Thresholds</strong>
        <p>Set violation limits before CI/CD failure</p>
    </div>
    <div class="feature-item">
        <strong>Extensible SDK</strong>
        <p>Create custom rules with the RuleKeeper SDK</p>
    </div>
</div>

<h2 id="installation">2. Installation</h2>

<h3>As a .NET Global Tool</h3>
<pre><code>dotnet tool install -g RuleKeeper.Cli</code></pre>

<h3>From Source</h3>
<pre><code>git clone https://github.com/your-org/rulekeeper.git
cd rulekeeper
dotnet build
dotnet run --project src/RuleKeeper.Cli -- --help</code></pre>

<h3>System Requirements</h3>
<ul>
    <li>.NET 8.0 SDK or later</li>
    <li>Windows, macOS, or Linux</li>
    <li>Minimum 4GB RAM (8GB recommended for large codebases)</li>
</ul>

<h2 id="quick-start">3. Quick Start</h2>

<h3>Step 1: Initialize Configuration</h3>
<pre><code>rulekeeper init</code></pre>
<p>This creates a <code>rulekeeper.yaml</code> file in your current directory with sensible defaults.</p>

<h3>Step 2: Run a Scan</h3>
<pre><code>rulekeeper scan ./src</code></pre>

<h3>Step 3: View Results</h3>
<p>The console output displays a tabular summary including:</p>
<ul>
    <li>Violation counts by severity</li>
    <li>Severity distribution bar chart</li>
    <li>Top violations by rule</li>
    <li>Detailed violation list with code snippets and fix hints</li>
</ul>

<div class="page-break"></div>

<h2 id="commands">4. Command Reference</h2>

<h3 id="cmd-scan">4.1 scan - Scan Code for Violations</h3>

<pre><code>rulekeeper scan &lt;path&gt; [options]</code></pre>

<h4>Arguments</h4>
<table>
    <tr><th>Argument</th><th>Description</th><th>Default</th></tr>
    <tr><td><code>&lt;path&gt;</code></td><td>Path to scan (file, directory, project, or solution)</td><td><code>.</code></td></tr>
</table>

<h4>Options</h4>
<table>
    <tr><th>Option</th><th>Alias</th><th>Description</th></tr>
    <tr><td><code>--config</code></td><td><code>-c</code></td><td>Path to configuration file</td></tr>
    <tr><td><code>--output</code></td><td><code>-o</code></td><td>Output format: console, json, sarif, html</td></tr>
    <tr><td><code>--format</code></td><td><code>-F</code></td><td>Additional output formats to generate</td></tr>
    <tr><td><code>--severity</code></td><td><code>-s</code></td><td>Minimum severity to report</td></tr>
    <tr><td><code>--fail-on</code></td><td><code>-f</code></td><td>Severity level that causes non-zero exit code</td></tr>
    <tr><td><code>--threshold-percent</code></td><td><code>--tp</code></td><td>Maximum allowed violation percentage (0-100)</td></tr>
    <tr><td><code>--critical-threshold</code></td><td><code>--ct</code></td><td>Maximum allowed critical violations</td></tr>
    <tr><td><code>--high-threshold</code></td><td><code>--ht</code></td><td>Maximum allowed high severity violations</td></tr>
    <tr><td><code>--total-threshold</code></td><td><code>--tt</code></td><td>Maximum allowed total violations</td></tr>
    <tr><td><code>--output-file</code></td><td></td><td>Output file path</td></tr>
    <tr><td><code>--include</code></td><td><code>-i</code></td><td>File patterns to include</td></tr>
    <tr><td><code>--exclude</code></td><td><code>-e</code></td><td>File patterns to exclude</td></tr>
    <tr><td><code>--parallel</code></td><td><code>-p</code></td><td>Enable parallel analysis (default: true)</td></tr>
    <tr><td><code>--verbose</code></td><td><code>-v</code></td><td>Verbose output</td></tr>
    <tr><td><code>--no-cache</code></td><td></td><td>Disable caching</td></tr>
    <tr><td><code>--no-color</code></td><td></td><td>Disable colored output</td></tr>
    <tr><td><code>--no-viz</code></td><td></td><td>Disable visualization in reports</td></tr>
    <tr><td><code>--no-table</code></td><td></td><td>Disable tabular summary</td></tr>
    <tr><td><code>--language</code></td><td><code>-l</code></td><td>Programming language (default: CSharp)</td></tr>
</table>

<h4>Examples</h4>
<pre><code># Basic scan with console output
rulekeeper scan ./src

# Scan with JSON output
rulekeeper scan ./src -o json --output-file report.json

# Scan with multiple output formats
rulekeeper scan ./src -o console -F json -F sarif

# Fail if more than 5 critical violations
rulekeeper scan ./src --fail-on Critical --critical-threshold 5

# Fail if total violations exceed 10%
rulekeeper scan ./src --threshold-percent 10

# Verbose output with custom config
rulekeeper scan ./src -c ./policies/strict.yaml -v</code></pre>

<h3 id="cmd-init">4.2 init - Create Configuration File</h3>
<pre><code>rulekeeper init [options]</code></pre>

<table>
    <tr><th>Option</th><th>Description</th></tr>
    <tr><td><code>--output</code></td><td>Output file path (default: rulekeeper.yaml)</td></tr>
    <tr><td><code>--force</code></td><td>Overwrite existing file</td></tr>
    <tr><td><code>--minimal</code></td><td>Create minimal configuration</td></tr>
</table>

<h3 id="cmd-validate">4.3 validate - Validate Configuration</h3>
<pre><code>rulekeeper validate &lt;config&gt;</code></pre>
<p>Validates a configuration file for syntax and semantic errors.</p>

<h3 id="cmd-list-rules">4.4 list-rules - List Available Rules</h3>
<pre><code>rulekeeper list-rules [--category &lt;category&gt;] [--format table|json]</code></pre>

<h3 id="cmd-explain">4.5 explain - Explain a Rule</h3>
<pre><code>rulekeeper explain &lt;rule-id&gt;</code></pre>
<p>Shows detailed information about a specific rule including description, parameters, and examples.</p>

<h3 id="cmd-editorconfig">4.6 generate-editorconfig - Generate EditorConfig</h3>
<pre><code>rulekeeper generate-editorconfig [options]</code></pre>

<table>
    <tr><th>Option</th><th>Description</th></tr>
    <tr><td><code>--output, -o</code></td><td>Output file path (default: .editorconfig)</td></tr>
    <tr><td><code>--config, -c</code></td><td>RuleKeeper config to base settings on</td></tr>
    <tr><td><code>--append, -a</code></td><td>Append to existing file</td></tr>
    <tr><td><code>--force, -f</code></td><td>Overwrite without prompting</td></tr>
    <tr><td><code>--comments</code></td><td>Include descriptive comments (default: true)</td></tr>
</table>

<div class="page-break"></div>

<h2 id="configuration">5. Configuration</h2>

<h3 id="cfg-structure">5.1 Configuration Structure</h3>

<pre><code># rulekeeper.yaml
metadata:
  organization: "Your Company"
  version: "1.0.0"

scan_config:
  language: CSharp
  include:
    - "**/*.cs"
  exclude:
    - "**/obj/**"
    - "**/bin/**"
    - "**/*.Designer.cs"
  parallel: true

output:
  format: console
  min_severity: Info
  fail_on: High
  visualization: true
  show_table: true
  critical_threshold: 0
  high_threshold: 0
  total_threshold: 0
  threshold_percentage: 0

coding_standards:
  naming:
    enabled: true
    severity: Medium
    rules:
      class_naming:
        id: CS-NAME-001
        enabled: true
        severity: High

prebuilt_policies:
  security:
    enabled: true
    severity: Critical</code></pre>

<h3 id="cfg-thresholds">5.2 Threshold Configuration</h3>

<p>Thresholds allow you to set acceptable violation limits. By default, all thresholds are 0, meaning any violation causes failure.</p>

<div class="note">
    <strong>Note:</strong> Thresholds are only evaluated when <code>fail_on</code> is set.
</div>

<table>
    <tr><th>Setting</th><th>CLI Option</th><th>Description</th></tr>
    <tr><td><code>critical_threshold</code></td><td><code>--ct</code></td><td>Maximum critical violations allowed</td></tr>
    <tr><td><code>high_threshold</code></td><td><code>--ht</code></td><td>Maximum high severity violations allowed</td></tr>
    <tr><td><code>total_threshold</code></td><td><code>--tt</code></td><td>Maximum total violations allowed</td></tr>
    <tr><td><code>threshold_percentage</code></td><td><code>--tp</code></td><td>Maximum violation percentage (0-100)</td></tr>
</table>

<h4>Example: Allowing Some Violations</h4>
<pre><code>output:
  fail_on: High
  critical_threshold: 0    # No critical violations allowed
  high_threshold: 5        # Allow up to 5 high violations
  total_threshold: 50      # Allow up to 50 total violations</code></pre>

<h3 id="cfg-visualization">5.3 Visualization Options</h3>

<table>
    <tr><th>Setting</th><th>CLI Flag</th><th>Description</th></tr>
    <tr><td><code>visualization</code></td><td><code>--no-viz</code></td><td>Enable/disable bar charts</td></tr>
    <tr><td><code>show_table</code></td><td><code>--no-table</code></td><td>Enable/disable tabular summaries</td></tr>
    <tr><td><code>colors</code></td><td><code>--no-color</code></td><td>Enable/disable colored output</td></tr>
    <tr><td><code>show_code</code></td><td></td><td>Show code snippets in violations</td></tr>
    <tr><td><code>show_hints</code></td><td></td><td>Show fix hints in violations</td></tr>
</table>

<div class="page-break"></div>

<h2 id="rules">6. Built-in Rules</h2>

<h3>Naming Conventions</h3>
<table>
    <tr><th>Rule ID</th><th>Name</th><th>Severity</th></tr>
    <tr><td>CS-NAME-001</td><td>Class Naming (PascalCase)</td><td><span class="badge badge-medium">Medium</span></td></tr>
    <tr><td>CS-NAME-002</td><td>Method Naming (PascalCase)</td><td><span class="badge badge-medium">Medium</span></td></tr>
    <tr><td>CS-NAME-003</td><td>Async Method Naming (Async suffix)</td><td><span class="badge badge-low">Low</span></td></tr>
    <tr><td>CS-NAME-004</td><td>Private Field Naming (_camelCase)</td><td><span class="badge badge-medium">Medium</span></td></tr>
    <tr><td>CS-NAME-005</td><td>Constant Naming (PascalCase)</td><td><span class="badge badge-medium">Medium</span></td></tr>
    <tr><td>CS-NAME-006</td><td>Property Naming (PascalCase)</td><td><span class="badge badge-medium">Medium</span></td></tr>
    <tr><td>CS-NAME-007</td><td>Interface Naming (I prefix)</td><td><span class="badge badge-medium">Medium</span></td></tr>
</table>

<h3>Security</h3>
<table>
    <tr><th>Rule ID</th><th>Name</th><th>Severity</th></tr>
    <tr><td>CS-SEC-001</td><td>SQL Injection Detection</td><td><span class="badge badge-critical">Critical</span></td></tr>
    <tr><td>CS-SEC-002</td><td>Hardcoded Secrets</td><td><span class="badge badge-critical">Critical</span></td></tr>
    <tr><td>CS-SEC-003</td><td>Sensitive Data Logging</td><td><span class="badge badge-high">High</span></td></tr>
    <tr><td>CS-SEC-004</td><td>XSS Prevention</td><td><span class="badge badge-critical">Critical</span></td></tr>
    <tr><td>CS-SEC-005</td><td>Path Traversal</td><td><span class="badge badge-high">High</span></td></tr>
</table>

<h3>Async Programming</h3>
<table>
    <tr><th>Rule ID</th><th>Name</th><th>Severity</th></tr>
    <tr><td>CS-ASYNC-001</td><td>Async Void Avoidance</td><td><span class="badge badge-high">High</span></td></tr>
    <tr><td>CS-ASYNC-002</td><td>Blocking Async Detection</td><td><span class="badge badge-critical">Critical</span></td></tr>
    <tr><td>CS-ASYNC-003</td><td>ConfigureAwait Usage</td><td><span class="badge badge-low">Low</span></td></tr>
</table>

<h3>Design</h3>
<table>
    <tr><th>Rule ID</th><th>Name</th><th>Severity</th></tr>
    <tr><td>CS-DESIGN-001</td><td>Method Length</td><td><span class="badge badge-medium">Medium</span></td></tr>
    <tr><td>CS-DESIGN-002</td><td>Parameter Count</td><td><span class="badge badge-medium">Medium</span></td></tr>
    <tr><td>CS-DESIGN-003</td><td>Cyclomatic Complexity</td><td><span class="badge badge-medium">Medium</span></td></tr>
    <tr><td>CS-DESIGN-004</td><td>Class Length</td><td><span class="badge badge-medium">Medium</span></td></tr>
</table>

<h3>Exception Handling</h3>
<table>
    <tr><th>Rule ID</th><th>Name</th><th>Severity</th></tr>
    <tr><td>CS-EXC-001</td><td>Empty Catch Blocks</td><td><span class="badge badge-high">High</span></td></tr>
    <tr><td>CS-EXC-002</td><td>Catching Base Exception</td><td><span class="badge badge-medium">Medium</span></td></tr>
    <tr><td>CS-EXC-003</td><td>Throwing in Finally</td><td><span class="badge badge-high">High</span></td></tr>
</table>

<h3>Dependency Injection</h3>
<table>
    <tr><th>Rule ID</th><th>Name</th><th>Severity</th></tr>
    <tr><td>CS-DI-001</td><td>Concrete Type Injection</td><td><span class="badge badge-medium">Medium</span></td></tr>
    <tr><td>CS-DI-002</td><td>Service Locator Pattern</td><td><span class="badge badge-high">High</span></td></tr>
</table>

<div class="page-break"></div>

<h2 id="output-formats">7. Output Formats</h2>

<h3>Console (Default)</h3>
<p>Beautiful tabular output featuring:</p>
<ul>
    <li>Summary table with path, config, files analyzed, and duration</li>
    <li>Severity breakdown table with PASS/FAIL indicators</li>
    <li>Bar chart visualization of violation distribution</li>
    <li>Top violations grouped by rule</li>
    <li>Detailed violation list with code snippets and fix hints</li>
</ul>

<h3>JSON</h3>
<pre><code>rulekeeper scan ./src -o json --output-file report.json</code></pre>
<p>Structured JSON output suitable for programmatic processing and integration with other tools.</p>

<h3>SARIF</h3>
<pre><code>rulekeeper scan ./src -o sarif --output-file results.sarif.json</code></pre>
<p>Static Analysis Results Interchange Format (SARIF) for GitHub Code Scanning, Azure DevOps, and other CI/CD tools.</p>

<h3>HTML</h3>
<pre><code>rulekeeper scan ./src -o html --output-file report.html</code></pre>
<p>Interactive HTML report with charts, filtering, and detailed violation information.</p>

<h3>Multiple Formats</h3>
<pre><code>rulekeeper scan ./src -o console -F json -F sarif --output-file report</code></pre>
<p>Generates console output plus report.json and report.sarif.json files.</p>

<h2 id="cicd">8. CI/CD Integration</h2>

<h3>GitHub Actions</h3>
<pre><code>name: Code Analysis
on: [push, pull_request]

jobs:
  analyze:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup .NET
        uses: actions/setup-dotnet@v3
        with:
          dotnet-version: '8.0.x'

      - name: Install RuleKeeper
        run: dotnet tool install -g RuleKeeper.Cli

      - name: Run Analysis
        run: |
          rulekeeper scan ./src \
            -o sarif \
            --output-file results.sarif.json \
            --fail-on High \
            --no-color

      - name: Upload SARIF
        uses: github/codeql-action/upload-sarif@v2
        if: always()
        with:
          sarif_file: results.sarif.json</code></pre>

<h3>Azure DevOps</h3>
<pre><code>trigger:
  - main

pool:
  vmImage: 'ubuntu-latest'

steps:
  - task: UseDotNet@2
    inputs:
      version: '8.0.x'

  - script: dotnet tool install -g RuleKeeper.Cli
    displayName: 'Install RuleKeeper'

  - script: |
      rulekeeper scan ./src \
        -o sarif \
        --output-file $(Build.ArtifactStagingDirectory)/results.sarif.json \
        --fail-on High
    displayName: 'Run Analysis'

  - task: PublishBuildArtifacts@1
    inputs:
      pathtoPublish: '$(Build.ArtifactStagingDirectory)'
      artifactName: 'analysis-results'</code></pre>

<div class="page-break"></div>

<h2 id="custom-rules">9. Custom Rules</h2>

<p>Create custom rules by implementing <code>IRuleAnalyzer</code> and using the RuleKeeper SDK:</p>

<pre><code>using Microsoft.CodeAnalysis.CSharp.Syntax;
using RuleKeeper.Sdk;
using RuleKeeper.Sdk.Attributes;

[Rule("CUSTOM-001",
    Name = "No Console.WriteLine",
    Description = "Disallow Console.WriteLine in production code",
    Severity = SeverityLevel.Medium,
    Category = "logging")]
public class NoConsoleWriteLineAnalyzer : BaseRuleAnalyzer
{
    [RuleParameter("allow_in_tests",
        Description = "Allow in test files",
        DefaultValue = true)]
    public bool AllowInTests { get; set; } = true;

    public override IEnumerable&lt;Violation&gt; Analyze(AnalysisContext context)
    {
        if (AllowInTests && context.FilePath.Contains("Test"))
            yield break;

        var invocations = context.SyntaxTree.GetRoot()
            .DescendantNodes()
            .OfType&lt;InvocationExpressionSyntax&gt;()
            .Where(i => i.ToString().Contains("Console.Write"));

        foreach (var invocation in invocations)
        {
            yield return CreateViolation(
                invocation.GetLocation(),
                "Use structured logging instead of Console.WriteLine",
                context,
                "Replace with _logger.LogInformation()"
            );
        }
    }
}</code></pre>

<h3>Loading Custom Rules</h3>
<pre><code>custom_rules:
  - path: "./custom-rules/MyCompany.Rules.dll"</code></pre>

<h2 id="troubleshooting">10. Troubleshooting</h2>

<h3>Common Issues</h3>

<div class="warning">
    <strong>Q: Analysis is slow</strong><br>
    A: Ensure parallel analysis is enabled (default) and caching is not disabled. Large codebases benefit from the <code>--parallel</code> flag.
</div>

<div class="warning">
    <strong>Q: Rules not being applied</strong><br>
    A: Check that the rule is enabled in your configuration and that file patterns match your source files.
</div>

<div class="warning">
    <strong>Q: Threshold not working as expected</strong><br>
    A: Remember that thresholds default to 0. Explicitly set the threshold value:
    <pre><code>rulekeeper scan ./src --fail-on High --high-threshold 5</code></pre>
</div>

<h3>Debug Mode</h3>
<pre><code>rulekeeper scan ./src -v --no-cache</code></pre>
<p>Verbose mode shows:</p>
<ul>
    <li>Configuration file path</li>
    <li>Output format settings</li>
    <li>Language configuration</li>
    <li>Threshold values</li>
    <li>Analysis progress</li>
</ul>

<footer>
    <p><strong>RuleKeeper</strong> - Policy-as-Code for C#</p>
    <p>Documentation Version 1.0.0 | Generated January 2026</p>
    <p>For support, visit the GitHub repository.</p>
</footer>

</body>
</html>
